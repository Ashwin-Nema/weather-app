(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{126:function(e,t,n){},153:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(24),r=n.n(a),i=n(26),s=n(8),o=n(194),l=n(205),j=n(195),d=n(196),u=n(32),m=n.n(u),h=(n(126),n(202)),b=n(200),O=n(203),p=n(2),f=function(e){var t=e.modal,n=e.centered,c=e.hidemodal,a=e.message,r=void 0===n;return Object(p.jsx)(b.a,{show:t,centered:r,onHide:c,children:Object(p.jsx)(O.a,{severity:"error",children:Object(p.jsx)("strong",{children:a})})})},x=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),o=i[0],l=i[1];return[n,a,function(){a(!1)},o,l,function(e){l(e),a(!0)}]},g=n(106),v=n.n(g).a.create({baseURL:"https://weather-app-97.herokuapp.com"}),y=Object(c.createContext)(),w=function(e){return parseFloat(e-273.15).toFixed(2)},k=function(e){var t=e.split(":"),n=t[0]>=12?"p.m.":"a.m.",c=t[0]%12;c=c?c.length>1?c:"0".concat(c):12;var a=t[1].length>1?t[1]:"0".concat(t[1]),r=t[2].length>1?t[2]:"0".concat(t[2]);return"".concat(c,":").concat(a,":").concat(r," ").concat(n)},C=n(193);function N(e){var t=e.map,n=e.coordinates;return Object(c.useEffect)((function(){var e=t.getCenter(),c=e.lat,a=e.lng,r=Object(s.a)(n,2),i=r[0],o=r[1];if(c!==i||a!==o){var l=new m.a.LatLng(i,o);t.flyTo(l,t.getZoom())}}),[t,n]),Object(p.jsx)(p.Fragment,{})}var S=function(e){var t=e.coordinates,n=e.weatherdata,a=e.saveweatherdata,r=Object(c.useState)(null),u=Object(s.a)(r,2),m=u[0],b=u[1],O=x(),g=Object(s.a)(O,6),S=g[0],_=g[2],E=g[3],P=g[5],F=Object(C.a)("(max-width:500px)"),I=Object(c.useRef)(),L=Object(c.useRef)(),M={map:m,coordinates:t},T={modal:S,hidemodal:_,message:E},Y=Object(c.useContext)(y);Object(c.useEffect)((function(){null!==m&&void 0!==L.current&&null!==L.current&&(L.current._container.style.backgroundColor="#fff3cd",L.current._container.style.border="none")}),[m]);var z=Object(c.useMemo)((function(){return Object(p.jsx)(p.Fragment,{children:Object.keys(n).length>0&&Object(p.jsxs)(o.a,{center:t,style:{height:"".concat(!0===F?"135vh":"100vh")},zoom:10,scrollWheelZoom:!0,whenCreated:b,children:[Object(p.jsx)(l.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(p.jsx)(j.a,{ref:I,position:t,children:Object(p.jsx)(d.a,{ref:L,offset:[-15,-15],direction:"top",opacity:1,permanent:!0,children:Object(p.jsxs)(h.a,{className:"bordernone",variant:"warning",children:[Object(p.jsxs)("h3",{className:"text-center",children:[n.name," "]}),Object(p.jsxs)("div",{className:"weathergrid",children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"weatherimagecontainer",children:[Object(p.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(n.icon,".png"),alt:n.description})," "]}),Object(p.jsx)("p",{className:"weatherimagecontainer",children:n.description}),Object(p.jsxs)("p",{className:"weatherimagecontainer",children:[n.temperature,"\xb0C"]})]}),Object(p.jsxs)("div",{className:"weatherdatagrid",children:[Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{children:["Minimum Temperature:",n.minimum_temperature,"\xb0C "]}),Object(p.jsxs)("p",{children:["Maximum Temperature:",n.maximum_temperature,"\xb0C "]})]}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{children:["Sunrise: ",n.sunrisetime]}),Object(p.jsxs)("p",{children:["Sunset: ",n.sunsettime]})]}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("p",{children:["Wind Speed: ",n.speed,"m/s"]}),Object(p.jsxs)("p",{children:["Humidity: ",n.humidity,"%"]})]})]})]})]})})})]})})}),[t,n,F]);return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{onClick:function(){if(navigator.permissions.query({name:"geolocation"}).then((function(e){"denied"===e.state&&P("You have block location access. Please allow location access in the browser.")})).catch((function(){P("Sorry your current browser does not support location-tracking feature")})),!0===Y){if(void 0!==m&&null!==m)try{m.locate(),m.on("locationfound",(function(e){var t=e.latlng,n=t.lat,c=t.lng;v.post("/getlocatondatabylatlng",{lat:n,lng:c}).then((function(t){var n=t.data,c=n.name,r=Object(s.a)(n.weather,1)[0],i=r.icon,o=r.description,l=n.wind.speed,j=n.main,d=j.temp,u=j.temp_min,h=j.temp_max,b=j.humidity,O=n.sunrisetime,p=n.sunsettime;m.flyTo(e.latlng,m.getZoom()),I.current.setLatLng(e.latlng),a({name:c,icon:i,sunrisetime:k(O),sunsettime:k(p),description:o,speed:l,temperature:w(d),minimum_temperature:w(u),maximum_temperature:w(h),humidity:b})})).catch((function(){P("Sorry location data for your location could not be found")}))}))}catch(e){P("Sorry something went wrong while trying to fetch your location")}}else P("You are offline. Please check your Internet Connection.")},className:"text-info d-flex justify-content-end smalltext",children:"Allow location access"}),m?Object(p.jsx)(N,Object(i.a)({},M)):null,z,Object(p.jsx)(f,Object(i.a)({},T))]})},_=n(107),E=n.n(_),P=n(204),F=n(199),I=n(201),L=n(109),M=n.n(L),T=n(108),Y=n.n(T),z=n(110),R=n.n(z);var Z=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],r=x(),o=Object(s.a)(r,6),l=o[0],j=o[2],d=o[3],u=o[5],m=Object(c.useState)({}),b=Object(s.a)(m,2),O=b[0],g=b[1],C=Object(c.useState)([23.2667,77.4]),N=Object(s.a)(C,2),_=N[0],L=N[1],T=Object(c.useContext)(y),z=function(e,t){var n=Object(c.useState)(e),a=Object(s.a)(n,2),r=a[0],i=a[1];return Object(c.useEffect)((function(){0!==Object.keys(t).length||e?e||i(!0):i(!1)}),[i,t,e]),r}(T,O),Z=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Bhopal";!0===T?v.post("/getlocatondata/".concat(e)).then((function(t){var n=t.data,c=n.coord,a=c.lat,r=c.lon,i=Object(s.a)(n.weather,1)[0],o=i.icon,l=i.description,j=n.wind.speed,d=n.main,u=d.temp,m=d.temp_min,h=d.temp_max,b=d.humidity,O=n.sunrisetime,p=n.sunsettime;g({name:e,icon:o,sunrisetime:k(O),sunsettime:k(p),description:l,speed:j,temperature:w(u),minimum_temperature:w(m),maximum_temperature:w(h),humidity:b}),L([a,r])})).catch((function(){u("Sorry weather data for your location could not be found")})):u("You are offline. Please check your Internet Connection.")}),[u,T]),A=function(){var e=n.trim();0!==e.length?Z(e):u("Input field cannot be empty")};Object(c.useEffect)((function(){0===Object.keys(O).length&&Z()}),[O,Z]);var B={weatherdata:O,coordinates:_,saveweatherdata:g},H={modal:l,hidemodal:j,message:d};return Object(p.jsx)("div",{children:!0===z?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"d-flex justify-content-center mt-5 mb-3",children:Object(p.jsxs)("div",{className:"d-flex flex-column",children:[Object(p.jsx)("div",{className:"d-flex justify-content-center mb-3",children:Object(p.jsx)("strong",{children:"Enter  location:"})}),Object(p.jsx)("div",{className:"d-flex justify-content-center ",children:Object(p.jsx)(F.a,{size:"small",value:n,onKeyPress:function(e){"Enter"===e.key&&A()},onChange:function(e){return a(e.target.value)},InputProps:{endAdornment:Object(p.jsx)(P.a,{position:"end",children:Object(p.jsx)(I.a,{onClick:A,children:Object(p.jsx)(E.a,{})})})}})})]})}),Object(p.jsx)("div",{children:Object(p.jsx)(S,Object(i.a)({},B))}),Object.keys(O).length>0&&Object(p.jsx)("div",{className:"mt-3 d-flex justify-content-center",children:Object(p.jsx)(h.a,{variant:"info",children:Object(p.jsxs)("div",{children:[Object(p.jsx)("h5",{children:Object(p.jsx)("p",{children:"Contact developer"})}),Object(p.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(p.jsxs)("a",{rel:"noreferrer",href:"https://twitter.com/ashwin_nema",target:"_blank",children:[Object(p.jsx)(Y.a,{color:"primary"}),"  "]}),Object(p.jsxs)("a",{rel:"noreferrer",href:"https://www.linkedin.com/in/ashwin-nema-4223671a5/",target:"_blank",children:[Object(p.jsx)(M.a,{color:"primary"}),"  "]})]})]})})}),Object(p.jsx)(f,Object(i.a)({},H))]}):Object(p.jsx)("div",{className:"d-flex justify-content-center mt-5",children:Object(p.jsxs)(h.a,{variant:"danger",children:[Object(p.jsx)(R.a,{style:{color:"red"}}),"You are offline. Please check your Internet Connection."]})})})},A=n(111);r.a.render(Object(p.jsx)(A.Detector,{render:function(e){var t=e.online;return Object(p.jsx)(y.Provider,{value:t,children:Object(p.jsx)(Z,{})})}}),document.getElementById("root"))}},[[153,1,2]]]);
//# sourceMappingURL=main.829fb9c0.chunk.js.map