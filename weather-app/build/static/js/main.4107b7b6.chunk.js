(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{119:function(e,t,n){},146:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n(24),r=n.n(a),i=n(26),s=n(9),o=n(184),l=n(196),d=n(185),j=n(186),u=n(31),m=n.n(u),h=(n(119),n(192)),b=n(190),p=n(193),O=n(2),f=function(e){var t=e.modal,n=e.centered,c=e.hidemodal,a=e.message,r=void 0===n;return Object(O.jsx)(b.a,{show:t,centered:r,onHide:c,children:Object(O.jsx)(p.a,{severity:"error",children:Object(O.jsx)("strong",{children:a})})})},x=function(){var e=Object(c.useState)(!1),t=Object(s.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),i=Object(s.a)(r,2),o=i[0],l=i[1];return[n,a,function(){a(!1)},o,l,function(e){l(e),a(!0)}]},g=n(101),v=n.n(g).a.create({baseURL:"https://weather-app-97.herokuapp.com"}),y=function(e){return parseFloat(e-273.15).toFixed(2)},w=function(e){var t=e.split(":"),n=t[0]>=12?"p.m.":"a.m.",c=t[0]%12;c=c?c.length>1?c:"0".concat(c):12;var a=t[1].length>1?t[1]:"0".concat(t[1]),r=t[2].length>1?t[2]:"0".concat(t[2]);return"".concat(c,":").concat(a,":").concat(r," ").concat(n)};function k(e){var t=e.map,n=e.coordinates;return Object(c.useEffect)((function(){var e=t.getCenter(),c=e.lat,a=e.lng,r=Object(s.a)(n,2),i=r[0],o=r[1];if(c!==i||a!==o){var l=new m.a.LatLng(i,o);t.flyTo(l,t.getZoom())}}),[t,n]),Object(O.jsx)(O.Fragment,{})}var _=function(e){var t=e.coordinates,n=e.weatherdata,a=e.saveweatherdata,r=Object(c.useState)(null),u=Object(s.a)(r,2),m=u[0],b=u[1],p=x(),g=Object(s.a)(p,6),_=g[0],S=g[2],C=g[3],N=g[5],E=Object(c.useRef)(),F=Object(c.useRef)(),L={map:m,coordinates:t},M={modal:_,hidemodal:S,message:C};Object(c.useEffect)((function(){null!==m&&void 0!==F.current&&null!==F.current&&(F.current._container.style.backgroundColor="#fff3cd",F.current._container.style.border="none")}),[m]);var T=Object(c.useMemo)((function(){return Object(O.jsx)(O.Fragment,{children:Object.keys(n).length>0&&Object(O.jsxs)(o.a,{center:t,style:{height:"100vh"},zoom:10,scrollWheelZoom:!0,whenCreated:b,children:[Object(O.jsx)(l.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(O.jsx)(d.a,{ref:E,position:t,children:Object(O.jsx)(j.a,{ref:F,offset:[-15,-15],direction:"top",opacity:1,permanent:!0,children:Object(O.jsxs)(h.a,{className:"bordernone",variant:"warning",children:[Object(O.jsxs)("h3",{className:"text-center",children:[n.name," "]}),Object(O.jsxs)("div",{className:"weathergrid",children:[Object(O.jsxs)("div",{children:[Object(O.jsx)("img",{src:"https://openweathermap.org/img/wn/".concat(n.icon,".png"),alt:n.description}),Object(O.jsx)("p",{children:n.description}),Object(O.jsxs)("p",{children:[n.temperature,"\xb0C"]})]}),Object(O.jsxs)("div",{className:"weatherdatagrid",children:[Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:["Minimum Temperature:",n.minimum_temperature,"\xb0C "]}),Object(O.jsxs)("p",{children:["Maximum Temperature:",n.maximum_temperature,"\xb0C "]})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:["Sunrise: ",n.sunrisetime]}),Object(O.jsxs)("p",{children:["Sunset: ",n.sunsettime]})]}),Object(O.jsxs)("div",{children:[Object(O.jsxs)("p",{children:["Wind Speed: ",n.speed,"m/s"]}),Object(O.jsxs)("p",{children:["Humidity: ",n.humidity,"%"]})]})]})]})]})})})]})})}),[t,n]);return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("div",{onClick:function(){if(navigator.permissions.query({name:"geolocation"}).then((function(e){"denied"===e.state&&N("You have block location access. Please allow location access in the browser.")})).catch((function(){N("Sorry your current browser does not support location-tracking feature")})),void 0!==m&&null!==m)try{m.locate(),m.on("locationfound",(function(e){var t=e.latlng,n=t.lat,c=t.lng;v.post("/getlocatondatabylatlng",{lat:n,lng:c}).then((function(t){var n=t.data,c=n.name,r=Object(s.a)(n.weather,1)[0],i=r.icon,o=r.description,l=n.wind.speed,d=n.main,j=d.temp,u=d.temp_min,h=d.temp_max,b=d.humidity,p=n.sunrisetime,O=n.sunsettime;m.flyTo(e.latlng,m.getZoom()),E.current.setLatLng(e.latlng),a({name:c,icon:i,sunrisetime:w(p),sunsettime:w(O),description:o,speed:l,temperature:y(j),minimum_temperature:y(u),maximum_temperature:y(h),humidity:b})})).catch((function(){N("Sorry location data for your location could not be found")}))}))}catch(e){N("Sorry something went wrong while trying to fetch your location")}},className:"text-info d-flex justify-content-end smalltext",children:"Allow location access"}),m?Object(O.jsx)(k,Object(i.a)({},L)):null,T,Object(O.jsx)(f,Object(i.a)({},M))]})},S=n(102),C=n.n(S),N=n(194),E=n(189),F=n(191),L=n(104),M=n.n(L),T=n(103),z=n.n(T);var I=function(){var e=Object(c.useState)(""),t=Object(s.a)(e,2),n=t[0],a=t[1],r=x(),o=Object(s.a)(r,3),l=o[0],d=o[1],j=o[2],u=Object(c.useState)({}),m=Object(s.a)(u,2),b=m[0],p=m[1],g=Object(c.useState)([23.2667,77.4]),k=Object(s.a)(g,2),S=k[0],L=k[1],T=Object(c.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Bhopal";v.post("/getlocatondata/".concat(e)).then((function(t){var n=t.data,c=n.coord,a=c.lat,r=c.lon,i=Object(s.a)(n.weather,1)[0],o=i.icon,l=i.description,d=n.wind.speed,j=n.main,u=j.temp,m=j.temp_min,h=j.temp_max,b=j.humidity,O=n.sunrisetime,f=n.sunsettime;p({name:e,icon:o,sunrisetime:w(O),sunsettime:w(f),description:l,speed:d,temperature:y(u),minimum_temperature:y(m),maximum_temperature:y(h),humidity:b}),L([a,r])})).catch((function(){d(!0)}))}),[d]),I=function(){var e=n.trim();0!==e.length?T(e):d(!0)};Object(c.useEffect)((function(){0===Object.keys(b).length&&T()}),[b,T]);var P={weatherdata:b,coordinates:S,saveweatherdata:p},R={modal:l,hidemodal:j,message:"".concat(""===n.trim()?"Input field cannot be empty":"Sorry weather data for your location could not be found")};return Object(O.jsxs)("div",{children:[Object(O.jsx)("div",{className:"d-flex justify-content-center mt-5 mb-3",children:Object(O.jsxs)("div",{className:"d-flex flex-column",children:[Object(O.jsx)("div",{className:"d-flex justify-content-center mb-3",children:Object(O.jsx)("strong",{children:"Enter  location:"})}),Object(O.jsx)("div",{className:"d-flex justify-content-center ",children:Object(O.jsx)(E.a,{size:"small",value:n,onKeyPress:function(e){"Enter"===e.key&&I()},onChange:function(e){return a(e.target.value)},InputProps:{endAdornment:Object(O.jsx)(N.a,{position:"end",children:Object(O.jsx)(F.a,{onClick:I,children:Object(O.jsx)(C.a,{})})})}})})]})}),Object(O.jsx)("div",{children:Object(O.jsx)(_,Object(i.a)({},P))}),Object(O.jsx)("div",{className:"mt-3 d-flex justify-content-center",children:Object(O.jsx)(h.a,{variant:"info",children:Object(O.jsxs)("div",{children:[Object(O.jsx)("h5",{children:Object(O.jsx)("p",{children:"Contact developer"})}),Object(O.jsxs)("div",{className:"d-flex justify-content-center",children:[Object(O.jsxs)("a",{rel:"noreferrer",href:"https://twitter.com/ashwin_nema",target:"_blank",children:[Object(O.jsx)(z.a,{color:"primary"}),"  "]}),Object(O.jsxs)("a",{rel:"noreferrer",href:"https://www.linkedin.com/in/ashwin-nema-4223671a5/",target:"_blank",children:[Object(O.jsx)(M.a,{color:"primary"}),"  "]})]})]})})}),Object(O.jsx)(f,Object(i.a)({},R))]})};r.a.render(Object(O.jsx)(I,{}),document.getElementById("root"))}},[[146,1,2]]]);
//# sourceMappingURL=main.4107b7b6.chunk.js.map